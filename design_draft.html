<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab Dashboard Mockup</title>
    
    <!-- 1. Tailwind CSS (für das Styling) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. React & ReactDOM (Core Libraries) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- 3. Babel (damit JSX im Browser funktioniert) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind Config für Custom Colors -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom Scrollbar für Lab-Look */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #cbd5e1;
            border-radius: 20px;
        }
        body { font-family: 'Inter', sans-serif; }
    </style>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-slate-50 text-slate-800">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICON SYSTEM (Inline SVGs statt externer Library für Standalone-Fähigkeit) ---
        const Icons = {
            FlaskConical: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2"/><line x1="10" x2="14" y1="2" y2="2"/><path d="M8.5 2h7"/><path d="M7 16h10"/></svg>,
            User: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>,
            Calendar: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>,
            RefreshCw: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>,
            Settings: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.39a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>,
            Search: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>,
            FileText: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/><line x1="10" x2="8" y1="9" y2="9"/></svg>,
            Copy: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>,
            Clock: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
            ArrowRight: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>,
            CheckCircle2: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>,
            Plus: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>,
            MoreHorizontal: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="1"/><circle cx="19" cy="12" r="1"/><circle cx="5" cy="12" r="1"/></svg>,
            X: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>,
            Save: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>,
            LayoutDashboard: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="7" height="9" x="3" y="3" rx="1"/><rect width="7" height="5" x="14" y="3" rx="1"/><rect width="7" height="9" x="14" y="12" rx="1"/><rect width="7" height="5" x="3" y="16" rx="1"/></svg>
        };

        const Icon = ({ name, className }) => {
            const IconComponent = Icons[name];
            return IconComponent ? <IconComponent className={className} /> : null;
        };

        // --- Mock Data ---

        const EXPERIMENTS_DATA = [
            {
                id: 'EXP-24-089',
                name: 'Katalysator-Screening Phase 1',
                project: 'Projekt Alpha-7',
                date: '31.01.2024',
                status: 'completed',
                summary: 'Erfolgreiches Screening der Liganden L1-L5. Hohe Selektivität bei L3 beobachtet, jedoch geringer Umsatz bei Raumtemperatur.',
                metrics: { yield: '87%', purity: '99.2%', temp: '25°C' },
                owner: 'Dr. M. Weber'
            },
            {
                id: 'EXP-24-090',
                name: 'Optimierung Lösungsmittel',
                project: 'Projekt Alpha-7',
                date: '01.02.2024',
                status: 'in-progress',
                summary: 'Testreihe mit polaren aprotischen Lösungsmitteln. Aktuell läuft der Lauf mit DMSO. Erste HPLC-Daten zeigen Nebenprodukte.',
                metrics: { yield: '--', purity: '--', temp: '60°C' },
                owner: 'K. Müller'
            },
            {
                id: 'EXP-24-091',
                name: 'Skalierung Batch 5kg',
                project: 'Produktion Scale-Up',
                date: '02.02.2024',
                status: 'review',
                summary: 'Exothermie im zweiten Schritt höher als erwartet. Kühlleistung musste manuell angepasst werden. Probe zur QS gesendet.',
                metrics: { yield: '92%', purity: 'TBD', temp: '45°C' },
                owner: 'Dr. S. Schmidt'
            },
            {
                id: 'EXP-24-092',
                name: 'Stabilitätsprüfung A4',
                project: 'Langzeitstudie Q1',
                date: '03.02.2024',
                status: 'planned',
                summary: 'Vorbereitung der Proben für den 4-Wochen Stress-Test bei 40°C/75% rF. Klimakammer reserviert.',
                metrics: null,
                owner: 'L. Fischer'
            },
            {
                id: 'EXP-24-093',
                name: 'Synthese Vorstufe B',
                project: 'Projekt Beta-2',
                date: '04.02.2024',
                status: 'completed',
                summary: 'Standardprotokoll angewendet. Ausbeute leicht unter Erwartung, aber Reinheit exzellent. Kristallisation verlief langsam.',
                metrics: { yield: '65%', purity: '99.8%', temp: '0°C' },
                owner: 'Dr. M. Weber'
            }
        ];

        const PLANNED_DATA = [
            {
                id: 'PLAN-24-001',
                parent: 'EXP-24-089',
                title: 'Ligand L3 Optimierung Druck',
                date: '06.02.2024',
                status: 'planned'
            },
            {
                id: 'PLAN-24-002',
                parent: 'EXP-24-090',
                title: 'Lösungsmittel Mix 50/50',
                date: '07.02.2024',
                status: 'draft'
            }
        ];

        const TASKS_DATA = [
            { id: 1, text: 'HPLC Rohdaten exportieren', done: true },
            { id: 2, text: 'Muster an Analytik senden', done: false },
            { id: 3, text: 'Laborbuch digital signieren', done: false },
        ];

        const NOTES_DATA = [
            { id: 1, author: 'Dr. M. Weber', time: '10:42', text: 'Temperaturkurve zeigt Anomalie bei t=30min.' },
            { id: 2, author: 'Du', time: '11:15', text: 'Habe die Kühlung überprüft, Thermostat war verstellt.' },
        ];

        // --- Components ---

        const StatusChip = ({ status }) => {
            const styles = {
                completed: 'bg-emerald-100 text-emerald-700 border-emerald-200',
                'in-progress': 'bg-blue-100 text-blue-700 border-blue-200',
                review: 'bg-amber-100 text-amber-700 border-amber-200',
                planned: 'bg-slate-100 text-slate-600 border-slate-200',
                draft: 'bg-purple-50 text-purple-600 border-purple-100'
            };
            const labels = {
                completed: 'Abgeschlossen',
                'in-progress': 'In Arbeit',
                review: 'Review offen',
                planned: 'Geplant',
                draft: 'Entwurf'
            };
            return (
                <span className={`text-[10px] uppercase tracking-wider font-bold px-2 py-0.5 rounded-full border ${styles[status] || styles.planned}`}>
                    {labels[status] || status}
                </span>
            );
        };

        const SkeletonCard = () => (
            <div className="bg-white p-4 rounded-xl border border-slate-100 mb-3 shadow-sm animate-pulse">
                <div className="flex justify-between mb-2">
                <div className="h-4 bg-slate-200 rounded w-1/3"></div>
                <div className="h-4 bg-slate-200 rounded w-16"></div>
                </div>
                <div className="h-3 bg-slate-200 rounded w-1/2 mb-3"></div>
                <div className="space-y-2">
                <div className="h-2 bg-slate-100 rounded w-full"></div>
                <div className="h-2 bg-slate-100 rounded w-5/6"></div>
                </div>
            </div>
        );

        // --- Main App Component ---

        function LabDashboard() {
            const [loading, setLoading] = useState(true);
            const [activeView, setActiveView] = useState('dashboard');
            const [selectedId, setSelectedId] = useState(EXPERIMENTS_DATA[0].id);
            const [activeTab, setActiveTab] = useState('overview');
            const [drawerOpen, setDrawerOpen] = useState(false);
            const [toast, setToast] = useState(null);
            
            useEffect(() => {
                const timer = setTimeout(() => setLoading(false), 1200);
                return () => clearTimeout(timer);
            }, []);

            useEffect(() => {
                if (toast) {
                const timer = setTimeout(() => setToast(null), 3000);
                return () => clearTimeout(timer);
                }
            }, [toast]);

            const selectedExp = EXPERIMENTS_DATA.find(e => e.id === selectedId) || EXPERIMENTS_DATA[0];

            const handlePlanSubmit = (e) => {
                e.preventDefault();
                setDrawerOpen(false);
                setToast('Folgeexperiment erfolgreich angelegt');
            };

            return (
                <div className="flex flex-col h-screen bg-slate-50 text-slate-800 font-sans overflow-hidden">
                
                {/* 1. TOP BAR */}
                <header className="h-14 bg-white border-b border-slate-200 flex items-center justify-between px-4 shrink-0 shadow-sm z-20 relative">
                    <div className="flex items-center gap-4">
                    <div className="flex items-center gap-2 text-teal-700 font-bold text-lg">
                        <Icon name="FlaskConical" className="w-6 h-6" />
                        <span>Lab Dashboard</span>
                    </div>
                    <div className="h-6 w-px bg-slate-200 mx-2 hidden md:block"></div>
                    <div className="hidden md:flex items-center gap-2 text-xs text-slate-500 bg-slate-100 px-3 py-1 rounded-full border border-slate-200">
                        <Icon name="User" className="w-3 h-3" />
                        <span>Team: Prozesschemie</span>
                        <span className="text-slate-300">|</span>
                        <Icon name="Calendar" className="w-3 h-3" />
                        <span>Zeitraum: letzte 30 Tage</span>
                    </div>
                    </div>

                    <div className="flex items-center gap-3">
                    <button className="p-2 text-slate-400 hover:text-teal-600 hover:bg-slate-50 rounded-full transition-colors" title="Aktualisieren">
                        <Icon name="RefreshCw" className="w-4 h-4" />
                    </button>
                    <button className="p-2 text-slate-400 hover:text-slate-700 hover:bg-slate-50 rounded-full transition-colors">
                        <Icon name="Settings" className="w-4 h-4" />
                    </button>
                    <div className="w-8 h-8 rounded-full bg-teal-100 text-teal-700 flex items-center justify-center font-bold text-xs border border-teal-200 ring-2 ring-white ring-offset-1">
                        MW
                    </div>
                    </div>
                </header>

                {/* 2. MAIN CONTENT */}
                <main className="flex-1 flex flex-row overflow-hidden relative">
                    
                    {/* LEFT COLUMN: LIST */}
                    <aside className="w-[400px] flex flex-col border-r border-slate-200 bg-slate-50/50 shrink-0">
                    <div className="p-4 pb-2">
                        <h2 className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">
                        {activeView === 'dashboard' ? 'Letzte 5 Experimente' : 'Geplante Experimente'}
                        </h2>
                        <div className="relative mb-2">
                        <div className="absolute left-2.5 top-2 text-slate-400">
                             <Icon name="Search" className="w-4 h-4" />
                        </div>
                        <input 
                            type="text" 
                            placeholder="Suche nach ID oder Name..." 
                            className="w-full bg-white border border-slate-200 rounded-lg pl-9 pr-3 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-teal-500/20 focus:border-teal-500 transition-all"
                        />
                        </div>
                    </div>

                    <div className="flex-1 overflow-y-auto px-4 pb-20 space-y-3 custom-scrollbar">
                        {loading ? (
                        <>
                            <SkeletonCard />
                            <SkeletonCard />
                            <SkeletonCard />
                        </>
                        ) : (
                        (activeView === 'dashboard' ? EXPERIMENTS_DATA : EXPERIMENTS_DATA.filter(e => e.status === 'planned').concat(EXPERIMENTS_DATA[0])).map((exp) => (
                            <div 
                            key={exp.id}
                            onClick={() => setSelectedId(exp.id)}
                            className={`
                                group relative p-4 rounded-xl border cursor-pointer transition-all duration-200 ease-in-out
                                ${selectedId === exp.id 
                                ? 'bg-white border-teal-500 shadow-md shadow-teal-900/5 ring-1 ring-teal-500/20' 
                                : 'bg-white border-slate-200 hover:border-teal-300 hover:shadow-sm'}
                            `}
                            >
                            <div className="flex justify-between items-start mb-1">
                                <span className={`font-mono text-xs font-bold ${selectedId === exp.id ? 'text-teal-700' : 'text-slate-500'}`}>
                                {exp.id}
                                </span>
                                <StatusChip status={exp.status} />
                            </div>
                            <h3 className="font-semibold text-slate-800 text-sm mb-1 group-hover:text-teal-700 transition-colors">
                                {exp.name}
                            </h3>
                            <div className="text-xs text-slate-400 mb-2 flex items-center gap-2">
                                <span>{exp.date}</span>
                                <span>•</span>
                                <span>{exp.project}</span>
                            </div>
                            <p className="text-xs text-slate-600 line-clamp-2 leading-relaxed mb-3">
                                {exp.summary}
                            </p>

                            {exp.metrics && (
                                <div className="flex gap-3 mb-3 pt-2 border-t border-slate-50">
                                <div className="flex flex-col">
                                    <span className="text-[10px] text-slate-400 uppercase">Yield</span>
                                    <span className="text-xs font-medium font-mono text-slate-700">{exp.metrics.yield}</span>
                                </div>
                                <div className="flex flex-col">
                                    <span className="text-[10px] text-slate-400 uppercase">Temp</span>
                                    <span className="text-xs font-medium font-mono text-slate-700">{exp.metrics.temp}</span>
                                </div>
                                </div>
                            )}

                            <div className="flex justify-between items-center opacity-60 group-hover:opacity-100 transition-opacity pt-1">
                                <button className="text-[10px] font-medium text-slate-400 hover:text-teal-600 flex items-center gap-1 p-1 hover:bg-slate-50 rounded">
                                    <Icon name="FileText" className="w-3 h-3" /> Report
                                </button>
                            </div>
                            </div>
                        ))
                        )}
                        <div className="h-8"></div>
                    </div>
                    </aside>

                    {/* RIGHT COLUMN: DETAIL PANEL */}
                    <section className="flex-1 bg-white flex flex-col h-full overflow-hidden relative">
                    
                    {loading ? (
                        <div className="h-full w-full flex items-center justify-center">
                            <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600"></div>
                        </div>
                    ) : (
                        <>
                        {/* Detail Header */}
                        <div className="px-8 py-6 border-b border-slate-100 flex justify-between items-start shrink-0">
                            <div>
                            <div className="flex items-center gap-3 mb-2">
                                <h1 className="text-2xl font-bold text-slate-800">{selectedExp.name}</h1>
                                <span className="font-mono text-sm text-slate-400 bg-slate-50 px-2 py-1 rounded border border-slate-100">{selectedExp.id}</span>
                            </div>
                            <div className="flex items-center gap-4 text-sm text-slate-500">
                                <div className="flex items-center gap-1.5">
                                <Icon name="User" className="w-4 h-4 text-slate-400" />
                                {selectedExp.owner}
                                </div>
                                <div className="w-1 h-1 bg-slate-300 rounded-full"></div>
                                <div>{selectedExp.project}</div>
                                <div className="w-1 h-1 bg-slate-300 rounded-full"></div>
                                <div>{selectedExp.date}</div>
                            </div>
                            </div>
                            <div className="flex gap-2">
                                <button className="px-4 py-2 text-sm font-medium text-slate-600 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 hover:text-slate-900 transition-colors shadow-sm flex items-center gap-2">
                                    <Icon name="FileText" className="w-4 h-4" />
                                    Report öffnen
                                </button>
                                <button 
                                onClick={() => setDrawerOpen(true)}
                                className="px-4 py-2 text-sm font-medium text-teal-700 bg-teal-50 border border-teal-200 rounded-lg hover:bg-teal-100 transition-colors shadow-sm flex items-center gap-2"
                                >
                                    <Icon name="Copy" className="w-4 h-4" />
                                    Als Vorlage
                                </button>
                            </div>
                        </div>

                        {/* Tabs */}
                        <div className="px-8 border-b border-slate-200 shrink-0">
                            <div className="flex gap-6">
                            {['overview', 'notes', 'planned'].map((tab) => (
                                <button
                                key={tab}
                                onClick={() => setActiveTab(tab)}
                                className={`
                                    py-4 text-sm font-medium border-b-2 transition-all relative
                                    ${activeTab === tab 
                                    ? 'text-teal-700 border-teal-600' 
                                    : 'text-slate-500 border-transparent hover:text-slate-800 hover:border-slate-300'}
                                `}
                                >
                                {tab === 'overview' && 'Übersicht'}
                                {tab === 'notes' && 'Notizen & Aufgaben'}
                                {tab === 'planned' && 'Folgeexperimente'}
                                
                                {tab === 'planned' && (
                                    <span className="ml-2 bg-slate-100 text-slate-600 text-[10px] px-1.5 py-0.5 rounded-full">2</span>
                                )}
                                </button>
                            ))}
                            </div>
                        </div>

                        {/* Tab Content Area */}
                        <div className="flex-1 overflow-y-auto p-8 bg-slate-50/30">
                            
                            {/* 1. OVERVIEW TAB */}
                            {activeTab === 'overview' && (
                            <div className="max-w-4xl animate-in fade-in slide-in-from-bottom-2 duration-300">
                                
                                <div className="grid grid-cols-3 gap-6 mb-8">
                                    <div className="col-span-2 bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                                    <h3 className="text-sm font-bold text-slate-400 uppercase tracking-wider mb-4 flex items-center gap-2">
                                        <Icon name="FileText" className="w-4 h-4" /> Zusammenfassung
                                    </h3>
                                    <p className="text-slate-700 leading-relaxed text-base">
                                        {selectedExp.summary}
                                        <br/><br/>
                                        Die Reaktionsbedingungen wurden stabil gehalten. Es zeigten sich keine unerwarteten exothermen Ereignisse. Die Aufarbeitung erfolgte mittels wässriger Extraktion. HPLC-Analyse bestätigt die hohe Reinheit des Hauptprodukts.
                                    </p>
                                    </div>
                                    <div className="col-span-1 space-y-4">
                                    <div className="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                        <h3 className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">Key Facts</h3>
                                        {selectedExp.metrics ? (
                                        <div className="space-y-3">
                                            <div className="flex justify-between items-center pb-2 border-b border-slate-50">
                                            <span className="text-slate-500 text-sm">Ausbeute</span>
                                            <span className="font-mono font-medium text-slate-800">{selectedExp.metrics.yield}</span>
                                            </div>
                                            <div className="flex justify-between items-center pb-2 border-b border-slate-50">
                                            <span className="text-slate-500 text-sm">Reinheit</span>
                                            <span className="font-mono font-medium text-slate-800">{selectedExp.metrics.purity}</span>
                                            </div>
                                            <div className="flex justify-between items-center">
                                            <span className="text-slate-500 text-sm">Temp (avg)</span>
                                            <span className="font-mono font-medium text-slate-800">{selectedExp.metrics.temp}</span>
                                            </div>
                                        </div>
                                        ) : (
                                        <div className="text-sm text-slate-400 italic">Keine Messdaten verfügbar</div>
                                        )}
                                    </div>
                                    <div className="bg-blue-50/50 p-4 rounded-xl border border-blue-100 flex items-start gap-3">
                                        <div className="bg-blue-100 p-1.5 rounded-full text-blue-600 mt-0.5">
                                        <Icon name="Clock" className="w-4 h-4" />
                                        </div>
                                        <div>
                                        <div className="text-xs font-bold text-blue-800 uppercase mb-1">Dauer</div>
                                        <div className="text-sm text-blue-900">4h 30min</div>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                            )}

                            {/* 2. NOTES & TASKS TAB */}
                            {activeTab === 'notes' && (
                            <div className="max-w-4xl grid grid-cols-2 gap-8 animate-in fade-in slide-in-from-bottom-2 duration-300">
                                
                                {/* Notes Column */}
                                <div>
                                <h3 className="text-sm font-bold text-slate-400 uppercase tracking-wider mb-4 flex items-center gap-2">
                                    Notizen & Verlauf
                                </h3>
                                <div className="space-y-4">
                                    {NOTES_DATA.map(note => (
                                    <div key={note.id} className="bg-white p-4 rounded-lg border border-slate-200 shadow-sm relative">
                                        <div className="flex justify-between items-baseline mb-2">
                                            <span className="text-sm font-semibold text-slate-800">{note.author}</span>
                                            <span className="text-xs text-slate-400">{note.time}</span>
                                        </div>
                                        <p className="text-sm text-slate-600">{note.text}</p>
                                    </div>
                                    ))}
                                    {/* Inline Add */}
                                    <div className="flex gap-2">
                                    <input 
                                        type="text" 
                                        placeholder="Neuer Kommentar..." 
                                        className="flex-1 bg-white border border-slate-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-teal-500 transition-colors"
                                    />
                                    <button className="bg-slate-800 text-white p-2 rounded-lg hover:bg-slate-700">
                                        <Icon name="ArrowRight" className="w-4 h-4" />
                                    </button>
                                    </div>
                                </div>
                                </div>

                                {/* Tasks Column */}
                                <div>
                                <h3 className="text-sm font-bold text-slate-400 uppercase tracking-wider mb-4 flex items-center gap-2">
                                    Aufgaben
                                </h3>
                                <div className="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
                                    {TASKS_DATA.map((task) => (
                                    <label key={task.id} className="flex items-center gap-3 p-4 border-b border-slate-50 hover:bg-slate-50 cursor-pointer transition-colors group">
                                        <div className={`
                                        w-5 h-5 rounded border flex items-center justify-center transition-colors
                                        ${task.done ? 'bg-teal-500 border-teal-500 text-white' : 'border-slate-300 bg-white group-hover:border-teal-400'}
                                        `}>
                                        {task.done && <Icon name="CheckCircle2" className="w-3.5 h-3.5" />}
                                        </div>
                                        <span className={`text-sm ${task.done ? 'text-slate-400 line-through' : 'text-slate-700'}`}>
                                        {task.text}
                                        </span>
                                    </label>
                                    ))}
                                    <button className="w-full text-left p-3 text-sm text-slate-500 hover:text-teal-600 hover:bg-slate-50 flex items-center gap-2 transition-colors">
                                    <Icon name="Plus" className="w-4 h-4" /> Aufgabe hinzufügen
                                    </button>
                                </div>
                                </div>

                            </div>
                            )}

                            {/* 3. PLANNED TAB */}
                            {activeTab === 'planned' && (
                            <div className="max-w-4xl animate-in fade-in slide-in-from-bottom-2 duration-300">
                                <div className="flex justify-between items-center mb-4">
                                <h3 className="text-sm font-bold text-slate-400 uppercase tracking-wider">Verknüpfte Experimente</h3>
                                <button 
                                    onClick={() => setDrawerOpen(true)}
                                    className="text-xs font-medium text-teal-600 hover:text-teal-700 hover:bg-teal-50 px-3 py-1.5 rounded transition-colors flex items-center gap-1"
                                >
                                    <Icon name="Plus" className="w-3.5 h-3.5" /> Neu Anlegen
                                </button>
                                </div>
                                
                                <div className="space-y-3">
                                {PLANNED_DATA.map(plan => (
                                    <div key={plan.id} className="bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between group hover:border-teal-300 transition-all">
                                        <div className="flex items-center gap-4">
                                        <div className="w-10 h-10 rounded-lg bg-slate-50 flex items-center justify-center text-slate-400 border border-slate-100">
                                            <Icon name="FlaskConical" className="w-5 h-5" />
                                        </div>
                                        <div>
                                            <div className="flex items-center gap-2 mb-0.5">
                                                <span className="font-mono text-xs font-bold text-slate-500">{plan.id}</span>
                                                <StatusChip status={plan.status} />
                                            </div>
                                            <h4 className="font-semibold text-slate-800 text-sm">{plan.title}</h4>
                                        </div>
                                        </div>
                                        <div className="flex items-center gap-4">
                                        <div className="text-xs text-slate-400 flex items-center gap-1">
                                            <Icon name="Calendar" className="w-3.5 h-3.5" /> {plan.date}
                                        </div>
                                        <div className="flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                                            <button className="p-1.5 text-slate-400 hover:text-teal-600 rounded bg-slate-50 hover:bg-white border border-transparent hover:border-slate-200">
                                                <Icon name="MoreHorizontal" className="w-4 h-4" />
                                            </button>
                                        </div>
                                        </div>
                                    </div>
                                ))}
                                </div>
                            </div>
                            )}

                        </div>
                        </>
                    )}

                    {/* RIGHT DRAWER: PLANNING */}
                    {/* Overlay */}
                    {drawerOpen && (
                        <div 
                        className="absolute inset-0 bg-slate-900/10 backdrop-blur-[1px] z-30 transition-opacity" 
                        onClick={() => setDrawerOpen(false)}
                        ></div>
                    )}
                    
                    {/* Drawer Panel */}
                    <div className={`
                        absolute top-2 bottom-2 right-2 w-[400px] bg-white rounded-xl shadow-2xl border border-slate-200 z-40 transform transition-transform duration-300 flex flex-col
                        ${drawerOpen ? 'translate-x-0' : 'translate-x-[110%]'}
                    `}>
                        <div className="p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50 rounded-t-xl">
                            <div>
                            <h2 className="font-bold text-lg text-slate-800">Folgeexperiment planen</h2>
                            <div className="text-xs text-slate-500 mt-1 flex items-center gap-1">
                                <span className="bg-slate-200 px-1 rounded text-slate-600 font-mono">Based on {selectedId}</span>
                            </div>
                            </div>
                            <button onClick={() => setDrawerOpen(false)} className="text-slate-400 hover:text-slate-700 p-1">
                            <Icon name="X" className="w-5 h-5" />
                            </button>
                        </div>

                        <div className="flex-1 overflow-y-auto p-6 space-y-6">
                            
                            {/* 1. Mode Selection */}
                            <div>
                            <label className="block text-xs font-bold text-slate-500 uppercase tracking-wider mb-3">Modus</label>
                            <div className="grid grid-cols-3 gap-2">
                                <div className="border-2 border-teal-600 bg-teal-50 text-teal-800 rounded-lg p-3 text-center cursor-pointer relative">
                                    <div className="text-xs font-bold">Einzel</div>
                                    <div className="absolute top-[-8px] right-[-8px] bg-teal-600 text-white rounded-full p-0.5">
                                        <Icon name="CheckCircle2" className="w-3 h-3" />
                                    </div>
                                </div>
                                <div className="border border-slate-200 text-slate-500 rounded-lg p-3 text-center hover:border-slate-300 cursor-pointer">
                                    <div className="text-xs font-medium">Serie</div>
                                </div>
                                <div className="border border-slate-200 text-slate-500 rounded-lg p-3 text-center hover:border-slate-300 cursor-pointer">
                                    <div className="text-xs font-medium">Frei</div>
                                </div>
                            </div>
                            </div>

                            {/* 2. Minimal Form */}
                            <form id="planForm" onSubmit={handlePlanSubmit} className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-slate-700 mb-1">Titel / Name</label>
                                <input 
                                    defaultValue={`Optimierung ${selectedExp.name}`} 
                                    className="w-full border border-slate-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-teal-500/20 focus:border-teal-500 outline-none" 
                                />
                            </div>
                            
                            <div>
                                <label className="block text-sm font-medium text-slate-700 mb-1">Ziel / Intention</label>
                                <textarea 
                                    rows="3" 
                                    placeholder="Was soll untersucht werden?"
                                    className="w-full border border-slate-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-teal-500/20 focus:border-teal-500 outline-none resize-none"
                                ></textarea>
                            </div>

                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="block text-sm font-medium text-slate-700 mb-1">Datum</label>
                                    <input type="date" className="w-full border border-slate-300 rounded-lg px-3 py-2 text-sm outline-none" />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium text-slate-700 mb-1">Verantwortlich</label>
                                    <select className="w-full border border-slate-300 rounded-lg px-3 py-2 text-sm outline-none bg-white">
                                        <option>Dr. M. Weber</option>
                                        <option>K. Müller</option>
                                    </select>
                                </div>
                            </div>

                            <div>
                                <label className="block text-sm font-medium text-slate-700 mb-1">Parameter Anpassung</label>
                                <div className="bg-slate-50 border border-slate-200 rounded-lg p-3 text-sm font-mono text-slate-600">
                                    Temp: 25°C → <span className="text-teal-600 font-bold bg-white px-1 border rounded">40°C</span><br/>
                                    Pressure: 1 bar (unchanged)
                                </div>
                            </div>
                            </form>

                        </div>

                        <div className="p-6 border-t border-slate-100 bg-slate-50/50 rounded-b-xl flex gap-3">
                            <button 
                            type="submit" 
                            form="planForm"
                            className="flex-1 bg-teal-600 hover:bg-teal-700 text-white font-medium py-2.5 rounded-lg shadow-sm shadow-teal-700/20 transition-all flex items-center justify-center gap-2"
                            >
                            <Icon name="Save" className="w-4 h-4" /> Anlegen
                            </button>
                            <button 
                            onClick={() => setDrawerOpen(false)}
                            className="px-4 py-2.5 bg-white border border-slate-300 text-slate-700 font-medium rounded-lg hover:bg-slate-50 transition-colors"
                            >
                            Abbrechen
                            </button>
                        </div>
                    </div>

                    </section>
                </main>

                {/* 3. BOTTOM BAR */}
                <footer className="h-16 bg-white border-t border-slate-200 shrink-0 px-6 flex items-center justify-between shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.02)] z-30">
                    <div className="flex items-center gap-4">
                    <button 
                        onClick={() => setDrawerOpen(true)}
                        className="bg-slate-900 text-white px-5 py-2.5 rounded-lg text-sm font-semibold hover:bg-slate-800 transition-colors flex items-center gap-2 shadow-sm"
                    >
                        <Icon name="FlaskConical" className="w-4 h-4" />
                        Folgeexperiment planen
                    </button>

                    <div className="h-8 w-px bg-slate-200"></div>

                    <button 
                        onClick={() => {
                            setActiveView(activeView === 'dashboard' ? 'planning' : 'dashboard');
                            // Simple reset for demo feel
                            if(activeView === 'planning') setLoading(true); 
                        }}
                        className={`
                        px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-2
                        ${activeView === 'planning' ? 'bg-indigo-50 text-indigo-700 border border-indigo-200' : 'text-slate-600 hover:bg-slate-100'}
                        `}
                    >
                        <Icon name="LayoutDashboard" className="w-4 h-4" />
                        {activeView === 'planning' ? 'Zurück zum Dashboard' : 'Geplante Experimente'}
                    </button>
                    </div>

                    <div className="flex items-center gap-4 text-xs text-slate-400">
                    <span className="flex items-center gap-1.5">
                        <div className="w-2 h-2 rounded-full bg-emerald-500"></div> System Online
                    </span>
                    <button className="hover:text-teal-600 transition-colors">Export CSV</button>
                    </div>
                </footer>

                {/* Toast Notification */}
                {toast && (
                    <div className="absolute bottom-20 left-1/2 transform -translate-x-1/2 bg-slate-900 text-white px-6 py-3 rounded-full shadow-xl flex items-center gap-3 animate-in slide-in-from-bottom-5 fade-in duration-300 z-50">
                    <Icon name="CheckCircle2" className="w-5 h-5 text-emerald-400" />
                    <span className="font-medium text-sm">{toast}</span>
                    </div>
                )}

                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<LabDashboard />);
    </script>
</body>
</html>
